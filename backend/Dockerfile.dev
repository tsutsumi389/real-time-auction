# ============================================
# Development Dockerfile with Hot Reload
# ============================================

FROM golang:1.21-alpine

WORKDIR /app

# 開発ツールのインストール
RUN apk add --no-cache git

# Air（ホットリロードツール）のインストール
RUN go install github.com/cosmtrek/air@latest

# 依存関係のキャッシュ用
COPY go.mod go.sum ./
RUN go mod download

# ソースコードはボリュームマウントで提供されるため、ここではコピーしない

# Airのデフォルト設定でホットリロード開始
CMD ["air", "-c", ".air.toml"]
